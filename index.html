<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.26/vue.min.js"></script>
    <script type="text/javascript" src="example.json"></script>
    <script src="main.js"></script>
</head>
<body>



    <?php
    if(isset($_POST["send"])) {
    	$phone = htmlspecialchars($_POST["phone"]);
    	$to = 'Artur69Karmov@gmail.com';
        $message = "betonbasis.ru";
    	$error_from = "";
    	if(!preg_match('/\d{9}/',$phone)) {
    		$error_from = "Введите корректный номер телефона!";
    		$is_error = true;
    	}
    	if(!$is_error) {
    		mail($to, "Заказ услуги с сайта", $message);
    	}
    }
    ?>



    <div class="delivery container">

        <div class="delivery__calc">
            <div id="app">
                <p class="delivery__title">ДОСТАВКА ДО НАСЕЛЕННОГО ПУНКТА</p>
                <div class="delivery__input">
                    <input type="text" class="delivery__input-value"  v-model="input" v-on:input="myinput" autofocus>
                    <img src="clear.png" alt="" v-on:click="clear">
                </div>

                <ul class="delivery__list">
                    <li v-for="item in items | filterBy input" class="delivery__item" v-on:click="element_click" data-name='{{item.name}}' data-price='{{item.price}}'>{{item.name}}</li>
                </ul>
                <div class="delivery__result">
                    <div class="delivery__adress">
                        <div class="delivery__adress-item delivery__from" v-if='false'>
                            <p>Адрес завода</p>
                            <span>ТАЛЛИНСКОЕ ШОССЕ 153, САНКТ-ПЕТЕРБУРГ</span>
                        </div>
                        <div class="delivery__adress-item delivery__to">
                            <img src='location2.png' alt='' />
                            <p>Адрес доставки</p>
                            <span class="delivery__to-value"></span>
                        </div>
                    </div>
                    <div class="delivery__price">
                        <div class="delivery__total-price">
                            <img src='cube.png' alt='' />
                            <p>Цена за м3</p>
                            <span class="delivery__price-value"></span>
                        </div>
                        <div class="delivery__min-price">
                            <img src='delivery.png' alt='' />
                            <p>Мин. цена доставки</p>
                            <span class="delivery__price-value2"></span>
                        </div>
                    </div>
                </div>
                <div class="order">
                    <div class="phone delivery__phone">
                        <img src="phone.png" alt="" class="phone__img">
                        <p lass="phone__text">ВАШ НОМЕР ТЕЛЕФОНА</p>
                        <span style="color:red"><?php echo $error_from ?></span>
                    </div>

                    <form action="" class="delivery__form" method="post">
                        <input type="tel" class="delivery__phone" name="phone" placeholder="Номер телефона:" value="">
                        <button type="submit" name="send">Заказать</button>
                    </form>
                </div>
            </div>
        </div>
    </div>


</body>
</html>
